<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="templates/common.xhtml">
	<ui:define name="title">liste comptes</ui:define>
	<ui:define name="content">
		<h2>liste des comptes</h2>
		<h:dataTable headerClass="HEADING" rowClasses="ROW1,ROW2"
		  value="#{compteMBean.comptes}" var="c" border="1">
			<h:column>
			    <f:facet name="header"><f:verbatim>numero</f:verbatim></f:facet>
				<h:outputText value="#{c.numero}" />
			</h:column>
			<h:column>
			    <f:facet name="header"><f:verbatim>label</f:verbatim></f:facet>
				<h:outputText value="#{c.label}" />
			</h:column>
			<h:column>
			    <f:facet name="header"><f:verbatim>solde</f:verbatim></f:facet>
				<h:outputText value="#{c.solde}" />
			</h:column>
		</h:dataTable>
		<hr/>
		<h:form>
		numero de compte à détaillé:
		<h:selectOneMenu  value="#{compteMBean.numCptSel}"
		     valueChangeListener="#{compteMBean.onNouvelleSelectionDeCompte}">
		     
		    <f:selectItems value="#{compteMBean.comptes}" var="c" 
		                   itemValue="#{c.numero}" itemLabel="#{c.label}"/>
		    <f:ajax event="change" render="idTabOp" />               
		</h:selectOneMenu>
		</h:form>
		<h:dataTable id="idTabOp" headerClass="HEADING" rowClasses="ROW1,ROW2"
		  value="#{compteMBean.operations}" var="o" border="1">
			<h:column>
			    <f:facet name="header"><f:verbatim>montant</f:verbatim></f:facet>
				<h:outputText value="#{o.montant}" />
			</h:column>
			<h:column>
			    <f:facet name="header"><f:verbatim>label</f:verbatim></f:facet>
				<h:outputText value="#{o.label}" />
			</h:column>			
		</h:dataTable>
		
		
		<hr/>
		<a href="virement.jsf">nouveau virement</a><br/>
		<br/>
	</ui:define>
</ui:composition>
</html>
